<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Pix Estático</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 8px; margin-top: 4px; }
    button { margin-top: 20px; padding: 10px 20px; }
    #qrcode { margin-top: 20px; }
    textarea { width: 100%; height: 80px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Gerador de Pix Estático</h1>
  <label>Tipo da Chave:</label>
  <select id="tipo">
    <option value="email">E-mail</option>
    <option value="telefone">Telefone</option>
    <option value="cpf">CPF</option>
    <option value="cnpj">CNPJ</option>
    <option value="aleatoria">Aleatória</option>
  </select>

  <label>Chave Pix:</label>
  <input type="text" id="chave" />

  <label>Identificador (opcional):</label>
  <input type="text" id="identificador" />

  <label>Valor (opcional):</label>
  <input type="text" id="valor" placeholder="Ex: 25.50" />

  <button onclick="gerarPix()">Gerar QR Code</button>

  <div id="resultado">
    <label>Pix Copia e Cola:</label>
    <textarea id="pixCode" readonly></textarea>
    <div id="qrcode"></div>
  </div>

  <script>
    function gerarPix() {
      const chave = document.getElementById('chave').value.trim();
      const identificador = document.getElementById('identificador').value.trim();
      const valor = document.getElementById('valor').value.trim();

      if (!chave) {
        alert('Informe a chave Pix.');
        return;
      }

      let payload = '000201'; // Início do payload
      payload += '2636'; // Merchant account info
      payload += '0014BR.GOV.BCB.PIX';
      payload += '01' + String(chave.length).padStart(2, '0') + chave;

      if (valor) {
        payload += '54' + String(valor.length).padStart(2, '0') + valor;
      }

      payload += '5802BR';

      if (identificador) {
        payload += '050' + String(identificador.length).padStart(2, '0') + identificador;
      }

      payload += '6304'; // CRC (placeholder, não calculado)

      document.getElementById('pixCode').value = payload;

      const qrArea = document.getElementById('qrcode');
      qrArea.innerHTML = '';
      new QRCode(qrArea, {
        text: payload,
        width: 256,
        height: 256
      });
    }
  </script>
</body>
</html>
